---
title: "statistical rethinking"
author: "Charles T. Gray"
date: "Begun 18 August 2018, last updated 21 September 2018"
slug: statistical-rethinking
---



<pre class="r"><code># packages
library(tidyverse, quietly = TRUE)
library(patchwork, quietly = TRUE)</code></pre>
<p>I’ve joined a bookclub</p>
<div id="chapter-two" class="section level2">
<h2>Chapter Two</h2>
<div id="practice" class="section level3">
<h3>Practice</h3>
<div id="easy" class="section level4">
<h4>Easy</h4>
<div id="question-one" class="section level5">
<h5>Question One</h5>
<p>Which of the expressions below correspond to the statement: <em>the probability of rain on Monday?</em></p>
<ol style="list-style-type: decimal">
<li>P(rain)</li>
<li>P(rain|Monday)</li>
<li>P(Monday|rain)</li>
<li>P(rain,Monday)/P(Monday)</li>
</ol>
<div id="answer" class="section level6">
<h6>Answer</h6>
<p>Choices (2) and (4).</p>
<p>I went looking for solutions and came across <a href="http://www.rpubs.com/andersgs/my_solutions_chapter2_statrethink">this</a>,</p>
<hr />
<p>“the probability of rain on Monday”
I think the statement could be interpreted in two different ways. First, the statement might just mean “what is the probability of rain on any given day”. In this cases, statement (1) is the only consistent statement.
OR…
It could also mean what the is the probability of rain given that it is Monday, in this case, statment (2) ansd (4) are correct.
I assume the author meant the latter.
***</p>
<p>I’m not convinced, though, that the solution can be (1). It doesn’t fully reflect all the information in the statement “the probability of rain on Monday”, and we’re asked which of the expressions correspond to the statement. So, I’m going with (2) and (4), which are mathematically equivalent.</p>
<p>Then I got to wondering whether or not something like this might be a bit more intuitive? I’m not sure.</p>
<p>Which of the expressions below correspond to the statement: <em>the probability of rain in winter?</em></p>
<ol style="list-style-type: decimal">
<li>P(rain)</li>
<li>P(rain|winter)</li>
<li>P(winter|rain)</li>
<li>P(rain,winter)/P(winter)</li>
</ol>
</div>
</div>
<div id="question-two" class="section level5">
<h5>Question Two</h5>
<p>Which of the following statements corresponds to the expression: Pr(Monday | rain)?</p>
<div id="answer-1" class="section level6">
<h6>Answer</h6>
<p>The probability that it is Monday, given that it is raining.</p>
</div>
</div>
</div>
<div id="medium" class="section level4">
<h4>Medium</h4>
<div id="question-one-1" class="section level5">
<h5>Question One</h5>
<pre class="r"><code># remind myself how stat_function works
# *rolls eyes* (every damn time)

tibble(x = c(0, 1)) %&gt;%
  ggplot(aes(x)) +
  stat_function(fun = dnorm, args = list(mean = 0.5))</code></pre>
<p><img src="/projects/statistical-rethinking_files/figure-html/statfun%20reminder-1.png" width="672" /></p>
<pre class="r"><code>get_grid_plot &lt;- function(wins, tosses, past_wins, past_tosses) {
  tibble(x = c(0, 1)) %&gt;%
    ggplot(aes(x)) +
    stat_function(fun = dbinom, args = list(x = past_wins, size = past_tosses), linetype = &quot;dashed&quot;) +
    stat_function(fun = dbinom, args = list(x = wins, size = tosses)) + 
    labs(x = &quot;p&quot;, y = &quot;plausability&quot;)
}

# patchwork::plot_layout(ncol = 3, nrow = 3) + 
  tibble(x = c(0, 1)) %&gt;%
    ggplot(aes(x)) +
    geom_hline(yintercept = 0.5, linetype = &quot;dashed&quot;) + 
    # stat_function(fun = dunif, linetype = &quot;dashed&quot;) + 
    stat_function(fun = dbinom, args = list(x = 1, size = 1)) +
  get_grid_plot(1, 2, 1, 1) + 
  get_grid_plot(2,3,1,2) + 
    get_grid_plot(3, 4, 2, 3) +
    get_grid_plot(4, 5, 3, 4) +
    get_grid_plot(4, 6, 4, 5) +
    get_grid_plot(5, 7, 4, 6) +
    get_grid_plot(5, 8, 5, 7) +
    get_grid_plot(6, 9, 5, 8)</code></pre>
<p><img src="/projects/statistical-rethinking_files/figure-html/gridplot%202M1-1.png" width="672" /></p>
<blockquote>
<p>Why is the first plot of the first prior a horizontal line 0.5, rather than 1?</p>
</blockquote>
<p>But, of course, in order to answer the question, I’m going to need to do this for three different cases.</p>
<ol style="list-style-type: decimal">
<li>WWW</li>
<li>WWWL</li>
<li>LWWLWWW</li>
</ol>
<p>And I’d really like to label each plot. And each plot doesn’t really need a <span class="math inline">\(p\)</span> in the <span class="math inline">\(x\)</span>-axis, nor do the <span class="math inline">\(y\)</span>-axis labels require repeating.</p>
<p>I’d like to create a function that takes a string as an argument and outputs a plot grid. Perhaps I should add an argument for plot layout. Technically, it should be a <code>wrap</code>, as it’s a one dimensional process. But, it will inevitably wrap, and it may be nice for aesthetic reasons to control how that happens.</p>
<p>With a little help from the <code>stringr</code> <a href="https://www.rstudio.com/resources/cheatsheets/">cheatsheet</a>, let’s answer all three questions at once.</p>
<pre class="r"><code># starting string
obs &lt;- &quot;WWW&quot;

# create ordered cases to plot
iterative_cases &lt;- tibble(n = seq(1, str_length(obs))) %&gt;%
  mutate(obs = map_chr(n, .f = function(x) {str_sub(obs, start = 1, end = x)}),
         water_count = map_int(obs, str_count)
)

# now to plot 

# for a given case
case = iterative_cases[[sample(seq(2, length(iterative_cases)), 1)]] # placeholder  

# count instances of water in this instance

# wow, this is *so* much easier with stringr! 
water_count &lt;- str_count(case, &quot;W&quot;)
n &lt;- str_length(case)

# this plot
tibble(x = c(0, 1)) %&gt;% 
  ggplot(aes(x)) +
  stat_function(fun = dbinom, args = list(x = water_count, size = n))</code></pre>
<p><img src="/projects/statistical-rethinking_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code># starting again; more different s

# starting string
obs &lt;- &quot;WLW&quot;

# each_n &lt;- 4
# 
# 
# # create ordered cases to plot
# iterative_cases &lt;- tibble(n = seq(1, str_length(obs))) %&gt;%
#   mutate(obs = map_chr(n, .f = function(x) {str_sub(obs, start = 1, end = x)}),
#          water_count = map_int(obs, str_count, &quot;W&quot;)
# ) %&gt;% 
#   full_join(
#     tibble(
#     obs = rep(n = rep(seq(1, str_length(obs), each = each_n))),
#     p = rep(seq(0, 1, by = 1 / each_n), times = str_length(obs))
#     ))</code></pre>
</div>
<div id="extension" class="section level5">
<h5>extension</h5>
<p>Convert Figure 2.5 to mathematics.</p>
<p>Show myself how updating is mathematically equivalent because combinatorics.</p>
</div>
</div>
</div>
</div>
